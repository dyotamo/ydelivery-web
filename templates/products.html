{% extends 'base.html' %}

{% block container %}
{% from "helpers/_form_helpers.html" import render_field %}
<form method="POST" action="{{ url_for('index') }}" enctype="multipart/form-data">
    {{ form.csrf_token }}
    <div class="form-group">
        {{ render_field(form.csv, class="form-control-file") }}
    </div>
    <div class="form-group">
        <input type="submit" class="btn btn-primary btn-sm" value="Carregar Produtos">
    </div>
</form>

<hr />

<h1>Produtos em stock</h1>

<div>
    <div class="table-responsive">
        <table class="table table-stripped">
            <thead class="thead-dark">
                <tr>
                    <th scope="col"></th>
                    <th scope="col">Nome</th>
                    <th scope="col">Categoria</th>
                    <th scope="col" style="text-align: right;">Preço unitário</th>
                </tr>
            </thead>
            <tbody>
                {% for product in pagination.items %}
                <tr>
                    <td>
                        {% if product.image and product.image != ''   %}
                        <img src="{{ product.image }}" width="100px" />
                        {% else %}
                        <div
                            style="background-color: orange; color: white; font-weight: bolder; width: 100px; height: 100px; text-align: center; border-radius: 100%; font-size: x-large;">
                            {{ product.name[0] }}{{ product.name[1] }}{{ product.name[2] }}{{ product.name[3] }}
                        </div>
                        {% endif %}
                    </td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.category }}</td>
                    <td style="text-align: right;">{{ "{:,.2f} MT".format(product.unit_price) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if pagination.has_prev %}
            <li class="page-item"><a class="page-link"
                    href="{{ url_for('index', page=pagination.prev_num) }}">Anterior</a></li>
            {% endif %}

            {% if pagination.has_next %}
            <li class="page-item"><a class="page-link"
                    href="{{ url_for('index', page=pagination.next_num) }}">Próximo</a></li>
            {% endif %}
        </ul>
    </nav>
</div>
{% endblock %}